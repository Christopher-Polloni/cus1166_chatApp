<!DOCTYPE html>

<html>
<head>
<title> Workspace | Total Collab </title>
<meta name= "viewport" content= "width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css?family=PT+Sans|Raleway" rel="stylesheet">
<style>
  .sidenav {
    height: 100%;
    width: 20%;
    position: fixed;
    z-index: 1;
    top: 0;
    left: 0;
    background-color: #B0C4DE;
    overflow-x: hidden;
  }
  .sidenav a {
    color: white;
    font-size: 20px;
    text-align: left;
    font-family: 'PT Sans' sans-serif;
    text-decoration: none;
    display: block;
    padding-top: 20px;
  }
  .sidenav b {
    color: white;
    font-size: 45px;
    text-align: left;
    font-family: 'PT Sans' sans-serif;
    text-decoration: none;
    display: block;
    padding-top: 85px;
  }
  .sidenav c {
    color: white;
    font-size: 30px;
    text-align: left;
    font-family: 'PT Sans' sans-serif;
    text-decoration: none;
    display: block;
    padding-top: 45px;
  }
  h1{
    font size: 60px;
    text-align: center;
    font-family: 'Raleway', sans-serif;
    padding-top: 200px;
    padding-left: 400px;
  }
  h2{
    font size: 40px;
    text-align: center;
    font-family: 'Raleway', sans-serif;
    padding-top: 40px;
    padding-left: 400px;
  }
  h3{
    text-align: center;
    padding-left: 250px;
  }
  img{
    float: left;
    padding-left: 30px;
    padding-top: 5px;
    padding-bottom: 10px;
  }
 input {
   font-size: 25px;
   text-align: left;
 }
  </style>
  </head>
  <body>

    <div class="sidenav">
      <a href="{{ url_for('index')}}"><img border="0" alt="TC Logo" src="/static/tclogo2.png" width="200" height="100"></a><br><br>
      <!-- <img class="sidenav pic" src="tclogo.jpg" alt= "TC Logo"></> -->
      <b>{{workspace.workspaceName}}</b>
      {% if current_user.id != workspace.owner %}
      <a href="{{url_for('leaveWorkspace', workspaceId = workspace.id) }}">Leave {{workspace.workspaceName}}!</a>
      {% endif %}
      {%for m in workspace.mods%}
      {%if current_user.id == m.id%}
      Invite Code: {{workspace.code}}
      <form action="{{ url_for('newcode', workspaceId = workspace.id) }}" method="post">
        <button type="Submit"> Generate New Code </button>
      </form>
      <br>
      {%endif%}
      {%endfor%}
      {% if current_user == owner%}
      <a href="{{url_for('mods', workspaceId = workspace.id)}}">Manage Moderators</a>
      {%endif%}
      <c>Subgroups
        {%for m in workspace.mods%}
        {%if current_user.id == m.id%}
        <a href="{{ url_for('add_subgroup', workspaceId = workspace.id) }}"> Add subgroup here!</a>
        {% endif %}
        {%endfor%}
      </c>
      <span style="font-size:25px;">
        {% for s in subgroups %}
          <a href="{{ url_for('subgroup', workspaceId = workspace.id, subgroupId = s.id) }}"> {{s.name}}</a>
        {% endfor %}
      </span>

      <c>Owner</c>
      <span style="font-size:25px;">
      {{owner.username}}
      </span>
      <c>Members</c>
      <span style="font-size:25px;">
        {% for m in members %}
        {% if m.username == current_user.username%}
        {{m.username}} <br>
        {% else %}
        {{m.username}} <a href="{{url_for('direct',otherUserId=m.id)}}">CHAT WITH THIS PERSON </a> <br>
        {% endif %}<!-- put link here for direct messaging -->
        {% endfor%}
      </span>
    </div>

    <div class="content">
    	<h1> Welcome to your workspace!</h1>
      <h2>Taskboard <a href="{{url_for('addTask', workspaceId=workspace.id)}}"> Add Task</a>
      </h2>
      <h3>
          <form action="" method="post" novalidate>
              Filter by Name: <input type="text" name="filterName"><br>
              <button type="Submit"> Submit</button>
          </form>
      </h3>
      <h3>
        {% for t in tasks %}
        Task Name: {{t.name}}<br>
        Task Description: {{t.description}}<br>
        Deadline: {{ t.deadline_day }} at {{ t.deadline_time}} <br>
        Person assigned: {{t.assigned_person.username }}<br>
        {% if current_user.id == workspace.owner %}
        Send Reminder Email to:
        <a href="{{ url_for('sendReminderEveryone', taskId = t.id, workspaceId = workspace.id) }}"> All Workspace Members</a> or
        <a href="{{ url_for('sendReminderAssigned', taskId = t.id, workspaceId = workspace.id, assigned_person=t.assigned_person.username) }}"> {{t.assigned_person.username}}</a><br>
        <a href="{{url_for('taskboardDelete', taskId = t.id, workspaceId = workspace.id) }}"> Delete Task </a>
        {% endif %}<br><br>
        {% endfor %}
      </h3>

    </div>
  </body>
  </html>
